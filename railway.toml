[build]
builder = "DOCKERFILE"
dockerfilePath = "apps/backend/Dockerfile"
# Build context is the root directory (vinhxuan-cms/)
# This allows proper workspace resolution for @vinhxuan/shared

[deploy]
startCommand = "node dist/main.js"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
healthcheckPath = "/api/health"
healthcheckTimeout = 10

# Environment variables needed for production
# These should be set in Railway dashboard:
# - NODE_ENV=production
# - DATABASE_URL (PostgreSQL connection string)
# - REDIS_URL (Redis connection string)
# - JWT_SECRET (for backwards compatibility if needed)
# - RSA_PRIVATE_KEY (base64 encoded)
# - RSA_PUBLIC_KEY (base64 encoded)
